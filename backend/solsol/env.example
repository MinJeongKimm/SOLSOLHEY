# ========================================
# SOLSOLHEY Backend Environment Variables
# ========================================

# ========================================
# 데이터베이스 설정
# ========================================
DB_HOST=localhost
DB_PORT=5432
DB_NAME=solsol
DB_USER=solsol
DB_PASSWORD=your-secure-database-password-here

# ========================================
# JWT 인증 설정 (보안 극중요!)
# ========================================
# JWT Secret Key - 반드시 변경하세요!
# 최소 256비트(32바이트) 이상의 강력한 랜덤 키가 필요합니다.
# 
# 키 생성 방법:
# 1. openssl rand -hex 32
# 2. openssl rand -base64 32
# 3. 온라인 랜덤 키 생성기 사용
# 
# 예시 (실제로 이 키 사용 금지! 각자 고유한 키 생성 필요):
JWT_SECRET_KEY=150b3ba29a26048e16a4413e8b4cab2d4b1f5552789dd0200eed3ae818e926a5

# JWT 토큰 만료 시간 (밀리초 단위)
# Access Token: 15분 (900000ms) - 짧을수록 보안상 좋음
# Refresh Token: 7일 (604800000ms) - 적절한 기간으로 설정
JWT_ACCESS_TOKEN_EXPIRATION=900000
JWT_REFRESH_TOKEN_EXPIRATION=604800000

# 보안 권장사항:
# - Access Token: 5분~30분 (300000~1800000)
# - Refresh Token: 1일~30일 (86400000~2592000000)
# - 운영환경에서는 더 짧은 시간 권장

# 강력한 키 생성 예시 (각자 새로운 키 생성하세요!):
# 16진수 형태 (권장):
# JWT_SECRET_KEY=150b3ba29a26048e16a4413e8b4cab2d4b1f5552789dd0200eed3ae818e926a5
# 
# Base64 형태:
# JWT_SECRET_KEY=2YQb9wfCRDkgW/XWy93SzgmDyV9UcCB3PP7kyOT+Q/k=
#
# 터미널에서 직접 생성:
# JWT_SECRET_KEY=$(openssl rand -hex 32)
# JWT_SECRET_KEY=$(openssl rand -base64 32)

# ========================================
# 금융 API 설정
# ========================================
FINANCE_API_KEY=your-finance-api-key-here
FINANCE_API_BASE_URL=https://finopenapi.ssafy.io/ssafy/api/v1/edu
FINANCE_API_TIMEOUT=10

# ========================================
# 신한은행 API 설정
# ========================================
SHINHAN_API_KEY=your-shinhan-api-key-here
SHINHAN_API_BASE_URL=https://finopenapi.ssafy.io/ssafy/api/v1/edu

# ========================================
# Redis 설정 (캐싱, 세션 관리용)
# ========================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your-redis-password-here
REDIS_DATABASE=0

# ========================================
# Spring Boot 설정
# ========================================
# 환경별 프로파일 설정 (보안 중요!)
# - local/dev: 개발환경 (H2 Console, Swagger UI 접근 가능)
# - prod: 운영환경 (H2 Console, Swagger UI 접근 차단)
SPRING_PROFILES_ACTIVE=local
SERVER_PORT=8080
SERVER_SERVLET_CONTEXT_PATH=/api/v1

# 운영환경에서는 반드시 prod 프로파일 사용!
# SPRING_PROFILES_ACTIVE=prod

# ========================================
# 로깅 설정
# ========================================
LOGGING_LEVEL_ROOT=INFO
LOGGING_LEVEL_COM_SOLSOLHEY=DEBUG
LOGGING_LEVEL_ORG_SPRINGFRAMEWORK_WEB_REACTIVE_FUNCTION_CLIENT=DEBUG

# ========================================
# CORS 설정 (보안 중요!)
# ========================================
# 개발환경용 - 로컬 개발 서버들만 허용
# 운영환경에서는 반드시 실제 프론트엔드 도메인으로 변경하세요!
# 예: https://solsolhey.com,https://app.solsolhey.com
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173,http://localhost:8080
CORS_ALLOWED_METHODS=GET,POST,PUT,PATCH,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=*
CORS_ALLOW_CREDENTIALS=true
CORS_MAX_AGE=3600

# 운영환경 CORS 설정 예시:
# CORS_ALLOWED_ORIGINS=https://solsolhey.com,https://app.solsolhey.com
# CORS_ALLOWED_ORIGINS=https://your-production-domain.com

# ========================================
# 보안 설정 (중요!)
# ========================================
# BCrypt 암호화 강도 (4~31, 높을수록 보안 강화/성능 저하)
# 권장값: 10~15 (개발환경), 12~16 (운영환경)
BCRYPT_STRENGTH=12

# 세션 타임아웃 (초 단위) - JWT 사용 시에도 세션 관리용
SESSION_TIMEOUT=1800

# JWT 추가 보안 설정
# JWT_ALGORITHM=HS256  # 기본값, 변경 시 JwtTokenProvider 수정 필요
# JWT_ISSUER=solsolhey.com  # 토큰 발급자 (선택사항)

# 보안 체크리스트:
# ✅ JWT Secret Key 변경했는지 확인
# ✅ CORS 설정이 운영 도메인으로 제한되어 있는지 확인  
# ✅ 운영환경에서 H2 Console, Swagger가 비활성화되어 있는지 확인
# ✅ HTTPS 설정이 되어 있는지 확인 (SSL_ENABLED=true)

# ========================================
# 파일 업로드 설정
# ========================================
FILE_UPLOAD_MAX_SIZE=10MB
FILE_UPLOAD_PATH=/uploads

# ========================================
# 이메일 설정 (향후 기능 확장용)
# ========================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password-here
SMTP_ENABLE_TLS=true

# ========================================
# 외부 서비스 API 키 (향후 기능 확장용)
# ========================================
# OpenAI API (AI 말풍선 기능용)
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_MODEL=gpt-3.5-turbo

# ========================================
# 모니터링 및 로깅 서비스 (운영환경용)
# ========================================
# Sentry (에러 추적)
SENTRY_DSN=your-sentry-dsn-here

# ========================================
# 개발 환경 전용 설정
# ========================================
# H2 데이터베이스 (로컬 개발용)
H2_CONSOLE_ENABLED=true
H2_CONSOLE_PATH=/h2-console

# Swagger UI (API 문서)
SWAGGER_UI_ENABLED=true
SWAGGER_UI_PATH=/swagger-ui

# ========================================
# 운영 환경 전용 설정
# ========================================
# SSL/TLS 설정
SSL_ENABLED=false
SSL_KEY_STORE_PATH=
SSL_KEY_STORE_PASSWORD=

# 헬스체크 설정
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health

# ========================================
# 성능 튜닝 설정
# ========================================
# JPA 설정
JPA_HIBERNATE_DDL_AUTO=update
JPA_SHOW_SQL=true
JPA_FORMAT_SQL=true

# Connection Pool 설정
DATASOURCE_HIKARI_MAXIMUM_POOL_SIZE=10
DATASOURCE_HIKARI_MINIMUM_IDLE=5
DATASOURCE_HIKARI_CONNECTION_TIMEOUT=30000
DATASOURCE_HIKARI_IDLE_TIMEOUT=600000
DATASOURCE_HIKARI_MAX_LIFETIME=1800000

# ========================================
# 캐시 설정
# ========================================
CACHE_TTL_DEFAULT=3600
CACHE_TTL_USER=1800
CACHE_TTL_CHALLENGE=7200
CACHE_TTL_MASCOT=3600

# ========================================
# 포인트 시스템 설정
# ========================================
POINT_SIGNUP_BONUS=1000
POINT_DAILY_ATTENDANCE=50
POINT_CHALLENGE_COMPLETION=100
POINT_MASCOT_LEVEL_UP=200

# ========================================
# 챌린지 시스템 설정
# ========================================
CHALLENGE_MAX_ACTIVE_PER_USER=5
CHALLENGE_MIN_DURATION_DAYS=1
CHALLENGE_MAX_DURATION_DAYS=30

# ========================================
# 마스코트 시스템 설정
# ========================================
MASCOT_MAX_LEVEL=100
MASCOT_EXP_PER_ACTION=10
MASCOT_LEVEL_UP_EXP_MULTIPLIER=1.5
